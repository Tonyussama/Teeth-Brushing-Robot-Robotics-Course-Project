function J_dot = jacobian_derivative(q, q_dot)
syms q0 q1 q2 q3 q0_dot q1_dot q2_dot q3_dot ;
J= jacobian_matrix([q0, q1, q2 ,q3])
J_dot_symbolic = [diff(J(1,1), q0)*q0_dot+ diff(J(1,1), q1)*q1_dot+ diff(J(1,1), q2)*q2_dot+ diff(J(1,1),q3)*q3_dot,... 
    diff(J(1,2), q0)*q0_dot+ diff(J(1,2), q1)*q1_dot+ diff(J(1,2), q2)*q2_dot+ diff(J(1,2),q3)*q3_dot ,...
    diff(J(1,3), q0)*q0_dot+ diff(J(1,3), q1)*q1_dot+ diff(J(1,3), q2)*q2_dot+ diff(J(1,3),q3)*q3_dot,...
    diff(J(1,4), q0)*q0_dot+ diff(J(1,4), q1)*q1_dot+ diff(J(1,4), q2)*q2_dot+ diff(J(1,4),q3)*q3_dot;
    diff(J(2,1), q0)*q0_dot+ diff(J(2,1), q1)*q1_dot+ diff(J(2,1), q2)*q2_dot+ diff(J(2,1),q3)*q3_dot,...
    diff(J(2,2), q0)*q0_dot+ diff(J(2,2), q1)*q1_dot+ diff(J(2,2), q2)*q2_dot+ diff(J(2,2),q3)*q3_dot,...
    diff(J(2,3), q0)*q0_dot+ diff(J(2,3), q1)*q1_dot+ diff(J(2,3), q2)*q2_dot+ diff(J(2,3),q3)*q3_dot,...
    diff(J(2,4), q0)*q0_dot+ diff(J(2,4), q1)*q1_dot+ diff(J(2,4), q2)*q2_dot+ diff(J(2,4),q3)*q3_dot;
    diff(J(3,1), q0)*q0_dot+ diff(J(3,1), q1)*q1_dot+ diff(J(3,1), q2)*q2_dot+ diff(J(3,1),q3)*q3_dot,...
    diff(J(3,2), q0)*q0_dot+ diff(J(3,2), q1)*q1_dot+ diff(J(3,2), q2)*q2_dot+ diff(J(3,2),q3)*q3_dot,...
    diff(J(3,3), q0)*q0_dot+ diff(J(3,3), q1)*q1_dot+ diff(J(3,3), q2)*q2_dot+ diff(J(3,3),q3)*q3_dot,...
    diff(J(3,4), q0)*q0_dot+ diff(J(3,4), q1)*q1_dot+ diff(J(3,4), q2)*q2_dot+ diff(J(3,4),q3)*q3_dot;
    diff(J(4,1), q0)*q0_dot+ diff(J(4,1), q1)*q1_dot+ diff(J(4,1), q2)*q2_dot+ diff(J(4,1),q3)*q3_dot,...
    diff(J(4,2), q0)*q0_dot+ diff(J(4,2), q1)*q1_dot+ diff(J(4,2), q2)*q2_dot+ diff(J(4,2),q3)*q3_dot,...
    diff(J(4,3), q0)*q0_dot+ diff(J(4,3), q1)*q1_dot+ diff(J(4,3), q2)*q2_dot+ diff(J(4,3),q3)*q3_dot,...
    diff(J(4,4), q0)*q0_dot+ diff(J(4,4), q1)*q1_dot+ diff(J(4,4), q2)*q2_dot+ diff(J(4,4),q3)*q3_dot;
    diff(J(5,1), q0)*q0_dot+ diff(J(5,1), q1)*q1_dot+ diff(J(5,1), q2)*q2_dot+ diff(J(5,1),q3)*q3_dot,...
    diff(J(5,2), q0)*q0_dot+ diff(J(5,2), q1)*q1_dot+ diff(J(5,2), q2)*q2_dot+ diff(J(5,2),q3)*q3_dot,...
    diff(J(5,3), q0)*q0_dot+ diff(J(5,3), q1)*q1_dot+ diff(J(5,3), q2)*q2_dot+ diff(J(5,3),q3)*q3_dot,...
    diff(J(5,4), q0)*q0_dot+ diff(J(5,4), q1)*q1_dot+ diff(J(5,4), q2)*q2_dot+ diff(J(5,4),q3)*q3_dot;
    diff(J(6,1), q0)*q0_dot+ diff(J(6,1), q1)*q1_dot+ diff(J(6,1), q2)*q2_dot+ diff(J(6,1),q3)*q3_dot,...
    diff(J(6,2), q0)*q0_dot+ diff(J(6,2), q1)*q1_dot+ diff(J(6,2), q2)*q2_dot+ diff(J(6,2),q3)*q3_dot,...
    diff(J(6,3), q0)*q0_dot+ diff(J(6,3), q1)*q1_dot+ diff(J(6,3), q2)*q2_dot+ diff(J(6,3),q3)*q3_dot,...
    diff(J(6,4), q0)*q0_dot+ diff(J(6,4), q1)*q1_dot+ diff(J(6,4), q2)*q2_dot+ diff(J(6,4),q3)*q3_dot;]
   
 J_dot_numeric = subs(J_dot_symbolic, [q0, q1, q2, q3 , q0_dot , q1_dot , q2_dot , q3_dot], [q(1),q(2),q(3),q(4),q_dot(1),q_dot(2),q_dot(3),q_dot(4)]);
 J_dot = vpa(J_dot_numeric, 2)

end








